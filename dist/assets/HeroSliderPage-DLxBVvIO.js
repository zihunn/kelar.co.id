import{u as $,a as B,r as l,j as e,t as u}from"./index-msZeOKOw.js";import{A as E}from"./AdminLayout-tV30L0Fw.js";import{P as R,L as T,U as M,a as z,T as U,D as W}from"./DeleteConfirmModal-a6CdzfHf.js";import{X as G}from"./ThemeLanguageToggle-CtFGXHg2.js";import{L as X}from"./loader-circle-DJpWDaoD.js";import{c as P}from"./createLucideIcon-Dvqhwfdi.js";import"./api-JaiMacjZ.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],D=P("chevron-down",J);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],H=P("chevron-up",K);function te(){const{heroSlides:i,articles:L,addHeroSlide:F,updateHeroSlide:O,deleteHeroSlide:A,moveHeroSlide:c}=$(),{t}=B(),[q,g]=l.useState(!1),[x,v]=l.useState(null),[o,m]=l.useState("url"),[N,p]=l.useState(null),[h,b]=l.useState(!1),[y,k]=l.useState({isOpen:!1,id:"",title:""}),[s,d]=l.useState({title:"",description:"",image:"",redirectUrl:"",status:"draft"}),I=r=>{var n;const a=(n=r.target.files)==null?void 0:n[0];if(a){p(a);const j=new FileReader;j.onloadend=()=>{d({...s,image:j.result})},j.readAsDataURL(a)}},_=async r=>{r.preventDefault(),b(!0);try{const a=new FormData;a.append("title",s.title),a.append("description",s.description),a.append("redirect_url",s.redirectUrl),a.append("status",s.status),o==="upload"&&N?a.append("image",N):o==="url"&&s.image&&a.append("image",s.image),x?(await O(x,a),u.success("Hero slide berhasil diupdate!")):(await F(a),u.success("Hero slide berhasil ditambahkan!")),f()}catch(a){u.error(a.message||"Gagal menyimpan hero slide")}finally{b(!1)}},w=r=>{const a=i.find(n=>n.id===r);a&&(d({title:a.title||"",description:a.description||"",image:a.image||"",redirectUrl:a.redirectUrl||"",status:a.status||"draft"}),v(r),g(!0),m(a.image&&(a.image.startsWith("http")||!a.image)?"url":"upload"),p(null))},S=r=>{const a=i.find(n=>n.id===r);a&&k({isOpen:!0,id:a.id,title:a.title||""})},f=()=>{d({title:"",description:"",image:"",redirectUrl:"",status:"draft"}),v(null),g(!1),m("url"),p(null),b(!1)},C=r=>{switch(r){case"published":return e.jsx("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-full text-xs font-medium",children:"Published"});case"draft":return e.jsx("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-xs font-medium",children:"Draft"});case"takedown":return e.jsx("span",{className:"px-3 py-1 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded-full text-xs font-medium",children:"Takedown"});default:return null}};return e.jsxs(E,{children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 sm:mb-8 gap-3",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl dark:text-white",children:t("admin.manageSlider")}),e.jsxs("button",{onClick:()=>g(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-[var(--kelar-primary)] text-white rounded-lg hover:bg-[var(--kelar-primary-light)] transition-colors",children:[e.jsx(R,{size:20}),e.jsx("span",{className:"text-sm sm:text-base",children:t("admin.addSlide")})]})]}),q&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"text-2xl dark:text-white",children:x?`${t("admin.edit")} Hero Slide`:`${t("admin.addSlide")}`}),e.jsx("button",{onClick:f,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:e.jsx(G,{size:24})})]}),e.jsxs("form",{onSubmit:_,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",children:t("admin.title")}),e.jsx("input",{type:"text",value:s.title||"",onChange:r=>d({...s,title:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--kelar-primary)]",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",children:t("admin.description")}),e.jsx("textarea",{value:s.description||"",onChange:r=>d({...s,description:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--kelar-primary)] h-24",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",children:t("admin.image")}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("button",{type:"button",onClick:()=>m("url"),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ${o==="url"?"bg-[var(--kelar-primary)] text-white border-[var(--kelar-primary)]":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:[e.jsx(T,{size:16}),"URL Link"]}),e.jsxs("button",{type:"button",onClick:()=>m("upload"),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ${o==="upload"?"bg-[var(--kelar-primary)] text-white border-[var(--kelar-primary)]":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:[e.jsx(M,{size:16}),"Upload File"]})]}),o==="url"?e.jsx("input",{type:"url",value:(s.image||"").startsWith("data:")?"":s.image||"",onChange:r=>d({...s,image:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--kelar-primary)]",placeholder:"https://example.com/image.jpg",required:!s.image}):e.jsx("input",{type:"file",accept:"image/*",onChange:I,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--kelar-primary)]",required:!s.image}),s.image&&e.jsx("img",{src:s.image,alt:"Preview",className:"mt-2 w-full h-48 object-cover rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",children:"Link ke Artikel"}),e.jsxs("select",{value:s.redirectUrl||"",onChange:r=>d({...s,redirectUrl:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--kelar-primary)]",required:!0,children:[e.jsx("option",{value:"",children:"Pilih Artikel"}),L.filter(r=>r.status==="published").map(r=>e.jsx("option",{value:r.id,children:r.title},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",children:t("admin.status")}),e.jsxs("select",{value:s.status||"draft",onChange:r=>d({...s,status:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--kelar-primary)]",required:!0,children:[e.jsx("option",{value:"draft",children:t("admin.draft")}),e.jsx("option",{value:"published",children:t("admin.published")}),e.jsx("option",{value:"takedown",children:t("admin.takedown")})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs("button",{type:"submit",disabled:h,className:"flex-1 py-3 bg-[var(--kelar-primary)] text-white rounded-lg hover:bg-[var(--kelar-primary-light)] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[h&&e.jsx(X,{className:"animate-spin",size:20}),t(x?"admin.update":"admin.save")]}),e.jsx("button",{type:"button",onClick:f,disabled:h,className:"flex-1 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:t("admin.cancel")})]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg sm:rounded-xl shadow-md overflow-hidden",children:i.length===0?e.jsxs("div",{className:"p-8 sm:p-12 text-center",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4 text-sm sm:text-base",children:"Belum ada hero slide"}),e.jsx("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-[var(--kelar-primary)] text-white rounded-lg hover:bg-[var(--kelar-primary-light)] transition-colors text-sm sm:text-base",children:"Tambah Hero Slide Pertama"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden divide-y divide-gray-200 dark:divide-gray-700",children:i.map(r=>e.jsx("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("img",{src:r.image,alt:r.title,className:"w-24 h-20 object-cover rounded flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-200 mb-1 truncate",children:r.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 line-clamp-2",children:r.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[C(r.status),e.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[e.jsx("button",{onClick:()=>c(r.id,"up"),className:"p-1.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors disabled:opacity-30",title:"Pindah ke Atas",disabled:i.indexOf(r)===0,children:e.jsx(H,{size:16})}),e.jsx("button",{onClick:()=>c(r.id,"down"),className:"p-1.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors disabled:opacity-30",title:"Pindah ke Bawah",disabled:i.indexOf(r)===i.length-1,children:e.jsx(D,{size:16})}),e.jsx("button",{onClick:()=>w(r.id),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:t("admin.edit"),children:e.jsx(z,{size:16})}),e.jsx("button",{onClick:()=>S(r.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:t("admin.delete"),children:e.jsx(U,{size:16})})]})]})]})]})},r.id))}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t("admin.preview")}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t("admin.title")}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t("admin.description")}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t("admin.status")}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t("admin.actions")})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:i.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("img",{src:r.image,alt:r.title,className:"w-24 h-16 object-cover rounded"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-200 max-w-xs",children:r.title})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-md line-clamp-2",children:r.description})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C(r.status)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"flex gap-1 border-r border-gray-200 dark:border-gray-700 pr-2 mr-2",children:[e.jsx("button",{onClick:()=>c(r.id,"up"),className:"p-1.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors disabled:opacity-30",title:"Pindah ke Atas",disabled:i.indexOf(r)===0,children:e.jsx(H,{size:18})}),e.jsx("button",{onClick:()=>c(r.id,"down"),className:"p-1.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors disabled:opacity-30",title:"Pindah ke Bawah",disabled:i.indexOf(r)===i.length-1,children:e.jsx(D,{size:18})})]}),e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{onClick:()=>w(r.id),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:t("admin.edit"),children:e.jsx(z,{size:18})}),e.jsx("button",{onClick:()=>S(r.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:t("admin.delete"),children:e.jsx(U,{size:18})})]})]})]},r.id))})]})})]})})]}),e.jsx(W,{isOpen:y.isOpen,onClose:()=>k({isOpen:!1,id:"",title:""}),onConfirm:()=>{A(y.id),u.success("Hero slide berhasil dihapus!"),k({isOpen:!1,id:"",title:""})},title:"Hapus Hero Slide",message:"Anda yakin ingin menghapus hero slide ini?",itemName:y.title})]})}export{te as HeroSliderPage};
