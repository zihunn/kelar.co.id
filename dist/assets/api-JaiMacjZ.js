const s="https://api.kelar.co.id/api",i={async login(r,t){var o,n;const e=await fetch(`${s}/login`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:r,password:t})}),a=await e.json();if(console.log("[API Service] Status respons:",e.status),!e.ok)throw console.error("[API Service] Request gagal:",a),new Error(((o=a.meta)==null?void 0:o.message)||"Gagal masuk. Silakan periksa kredensial Anda.");return(n=a.data)!=null&&n.access_token?(console.log("[API Service] Menyimpan token ke localStorage..."),localStorage.setItem("kelar_admin_token",a.data.access_token),localStorage.setItem("kelar_admin_user",JSON.stringify(a.data.user))):console.warn("[API Service] Token tidak ditemukan dalam respons sukses!"),a},logout(){localStorage.removeItem("kelar_admin_token"),localStorage.removeItem("kelar_admin_user")},getToken(){return localStorage.getItem("kelar_admin_token")},isAuthenticated(){return!!this.getToken()},async getCompanySettings(){var e;const r=await fetch(`${s}/company-settings`,{headers:{Accept:"application/json"}}),t=await r.json();if(!r.ok)throw new Error(((e=t.meta)==null?void 0:e.message)||"Gagal mengambil data.");return t.data},async updateCompanySettings(r){var a;const t=await fetch(`${s}/company-settings`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${this.getToken()}`},body:JSON.stringify(r)}),e=await t.json();if(!t.ok)throw new Error(((a=e.meta)==null?void 0:a.message)||"Gagal memperbarui data.");return e.data},async getArticles(r={}){var o;const t=new URLSearchParams(r).toString(),e=await fetch(`${s}/articles?${t}`,{headers:{Accept:"application/json"}}),a=await e.json();if(!e.ok)throw new Error(((o=a.meta)==null?void 0:o.message)||"Gagal mengambil artikel.");return a},async getArticle(r){var a;const t=await fetch(`${s}/articles/${r}`,{headers:{Accept:"application/json"}}),e=await t.json();if(!t.ok)throw new Error(((a=e.meta)==null?void 0:a.message)||"Gagal mengambil detail artikel.");return e.data},async createArticle(r){var a;const t=await fetch(`${s}/articles`,{method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${this.getToken()}`},body:r}),e=await t.json();if(!t.ok)throw new Error(((a=e.meta)==null?void 0:a.message)||"Gagal membuat artikel.");return e.data},async updateArticle(r,t){var o;const e=await fetch(`${s}/articles/${r}`,{method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${this.getToken()}`},body:t}),a=await e.json();if(!e.ok)throw new Error(((o=a.meta)==null?void 0:o.message)||"Gagal memperbarui artikel.");return a.data},async deleteArticle(r){var e;const t=await fetch(`${s}/articles/${r}`,{method:"DELETE",headers:{Accept:"application/json",Authorization:`Bearer ${this.getToken()}`}});if(!t.ok){const a=await t.json();throw new Error(((e=a.meta)==null?void 0:e.message)||"Gagal menghapus artikel.")}return!0},async getHeroSliders(r={}){var o;const t=new URLSearchParams(r).toString(),e=await fetch(`${s}/hero-sliders?${t}`,{headers:{Accept:"application/json"}}),a=await e.json();if(!e.ok)throw new Error(((o=a.meta)==null?void 0:o.message)||"Gagal mengambil slider.");return a},async createHeroSlider(r){var a;const t=await fetch(`${s}/hero-sliders`,{method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${this.getToken()}`},body:r}),e=await t.json();if(!t.ok)throw console.error("[API Service] Validasi gagal:",e.data),new Error(((a=e.meta)==null?void 0:a.message)||"Gagal membuat slider.");return e.data},async updateHeroSlider(r,t){var o;const e=await fetch(`${s}/hero-sliders/${r}`,{method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${this.getToken()}`},body:t}),a=await e.json();if(!e.ok)throw console.error("[API Service] Validasi gagal:",a.data),new Error(((o=a.meta)==null?void 0:o.message)||"Gagal memperbarui slider.");return a.data},async deleteHeroSlider(r){var e;const t=await fetch(`${s}/hero-sliders/${r}`,{method:"DELETE",headers:{Accept:"application/json",Authorization:`Bearer ${this.getToken()}`}});if(!t.ok){const a=await t.json();throw new Error(((e=a.meta)==null?void 0:e.message)||"Gagal menghapus slider.")}return!0},async reorderHeroSlider(r,t){var o;const e=await fetch(`${s}/hero-sliders/${r}/reorder`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${this.getToken()}`},body:JSON.stringify({direction:t})}),a=await e.json();if(!e.ok)throw new Error(((o=a.meta)==null?void 0:o.message)||"Gagal mengubah urutan.");return a}};export{i as api};
